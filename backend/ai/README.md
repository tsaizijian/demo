# Nuxt + Flask-AppBuilder èŠå¤©å®¤å°ˆæ¡ˆ

## ğŸ“Œ å°ˆæ¡ˆæ¦‚è¿°

æ‰“é€ ä¸€å€‹æ”¯æ´ä½¿ç”¨è€…è¨»å†Šç™»å…¥ã€è¨Šæ¯å³æ™‚æ”¶ç™¼ã€æ¬Šé™æ§ç®¡çš„èŠå¤©å®¤ç³»çµ±ï¼Œå‰ç«¯ä½¿ç”¨ Nuxt 3ï¼Œå¾Œç«¯ä½¿ç”¨ Flask-AppBuilderï¼Œæ”¯æ´ REST API èˆ‡ WebSocketã€‚

**ç•¶å‰æ•´é«”é€²åº¦ï¼š70%** - å·²ç¶“æ˜¯åŠŸèƒ½å®Œæ•´çš„èŠå¤©å®¤æ‡‰ç”¨ï¼Œåªå·®æœ€å¾Œçš„ WebSocket å³æ™‚é€šè¨ŠåŠŸèƒ½ï¼

---

## ğŸ§± æŠ€è¡“æ¶æ§‹

| å±¤ç´š     | æŠ€è¡“                      | èªªæ˜ |
|----------|---------------------------|------|
| å‰ç«¯     | Nuxt 3, Pinia, Tailwind   | å»ºæ§‹ä½¿ç”¨è€…ä»‹é¢ã€è·¯ç”±ã€ç‹€æ…‹ç®¡ç† |
| é€šè¨Š     | Socket.IO                 | å¯¦ç¾å³æ™‚èŠå¤©å®¤åŠŸèƒ½ |
| å¾Œç«¯ API | Flask-AppBuilder (FAB)    | æä¾›è³‡æ–™å­˜å–èˆ‡é©—è­‰ |
| è³‡æ–™åº«   | SQLite / PostgreSQL       | å„²å­˜è¨Šæ¯èˆ‡ä½¿ç”¨è€…è³‡æ–™ |

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

### å¾Œç«¯ (Flask-AppBuilder) - 95% å®Œæˆ
```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py          # Flask app åˆå§‹åŒ– + CORS
â”‚   â”œâ”€â”€ models.py            # è³‡æ–™åº«æ¨¡å‹
â”‚   â”œâ”€â”€ apis.py              # REST API ç«¯é»
â”‚   â”œâ”€â”€ register_api.py      # ä½¿ç”¨è€…è¨»å†Š API
â”‚   â”œâ”€â”€ socketio_server.py   # WebSocket æœå‹™å™¨ (å¾…å®Œæˆ)
â”‚   â””â”€â”€ views.py             # ç®¡ç†ç•Œé¢
â”œâ”€â”€ config.py                # è¨­å®šæª”
â””â”€â”€ run.py                   # å•Ÿå‹•è…³æœ¬
```

### å‰ç«¯ (Nuxt 3) - 90% å®Œæˆ
```
frontend/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.vue            # é¦–é é‡å®šå‘
â”‚   â”œâ”€â”€ login.vue            # ç™»å…¥é é¢
â”‚   â”œâ”€â”€ register.vue         # è¨»å†Šé é¢
â”‚   â””â”€â”€ chatroom.vue         # èŠå¤©å®¤ä¸»é 
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ user.ts              # ä½¿ç”¨è€…ç‹€æ…‹ç®¡ç†
â”‚   â””â”€â”€ chat.ts              # èŠå¤©ç‹€æ…‹ç®¡ç†
â”œâ”€â”€ middleware/auth.ts       # èªè­‰ä¸­é–“ä»¶
â”œâ”€â”€ plugins/auth.client.ts   # èªè­‰æ’ä»¶
â””â”€â”€ nuxt.config.ts           # Nuxt è¨­å®š
```

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### ğŸ” ä½¿ç”¨è€…ç³»çµ± (100% å®Œæˆ)
- âœ… ä½¿ç”¨è€…è¨»å†ŠåŠŸèƒ½ (`/api/v1/register/signup`)
- âœ… ç”¨æˆ¶åå¯ç”¨æ€§å³æ™‚æª¢æŸ¥ (`/api/v1/register/check-username`)
- âœ… ä½¿ç”¨è€…ç™»å…¥èªè­‰ (`/api/v1/security/login`)
- âœ… JWT Token è‡ªå‹•ç®¡ç†
- âœ… å€‹äººè³‡æ–™ç®¡ç† (`/api/v1/userprofileapi/`)

### ğŸ’¬ èŠå¤©åŠŸèƒ½ (70% å®Œæˆ)
- âœ… ç™¼é€è¨Šæ¯ (REST API)
- âœ… æª¢è¦–è¨Šæ¯æ­·å²
- âœ… åˆªé™¤è‡ªå·±çš„è¨Šæ¯
- âœ… ç¾è§€çš„èŠå¤©ç•Œé¢
- âŒ å³æ™‚è¨Šæ¯åŒæ­¥ (éœ€è¦ WebSocket)

### ğŸ‘¥ ä½¿ç”¨è€…äº’å‹• (80% å®Œæˆ)
- âœ… ç·šä¸Šä½¿ç”¨è€…åˆ—è¡¨
- âœ… å®šæ™‚æ›´æ–° (30ç§’)
- âŒ å³æ™‚ä¸Šç·š/é›¢ç·šé€šçŸ¥ (éœ€è¦ WebSocket)

### ğŸ›  ç®¡ç†å¾Œå° (100% å®Œæˆ)
- âœ… å®Œæ•´çš„ FAB ç®¡ç†ç•Œé¢ (http://localhost:8080)
- âœ… è¨Šæ¯ç®¡ç†
- âœ… ä½¿ç”¨è€…ç®¡ç†
- âœ… é »é“ç®¡ç†

---

## ğŸš€ å¿«é€Ÿå•Ÿå‹•

### 1. å•Ÿå‹•å¾Œç«¯
```bash
cd /home/jian/Desktop/chatroom_v2/backend
python run.py
# å¾Œç«¯: http://localhost:8080
```

### 2. å•Ÿå‹•å‰ç«¯
```bash
cd /home/jian/Desktop/chatroom_v2/frontend
npm run dev
# å‰ç«¯: http://localhost:3000
```

### 3. æ¸¬è©¦å¸³è™Ÿ
- ä½¿ç”¨è€…åç¨±: `jerry`
- å¯†ç¢¼: `h94y3ru04`

---

## ğŸ”— ä¸»è¦ API ç«¯é»

### ä½¿ç”¨è€…ç›¸é—œ
| æ–¹æ³• | ç«¯é» | èªªæ˜ | ç‹€æ…‹ |
|------|------|------|------|
| POST | `/api/v1/register/signup` | ä½¿ç”¨è€…è¨»å†Š | âœ… |
| POST | `/api/v1/register/check-username` | æª¢æŸ¥ç”¨æˆ¶åå¯ç”¨æ€§ | âœ… |
| POST | `/api/v1/security/login` | ä½¿ç”¨è€…ç™»å…¥ | âœ… |
| GET | `/api/v1/userprofileapi/me` | å–å¾—å€‹äººè³‡æ–™ | âœ… |

### èŠå¤©è¨Šæ¯
| æ–¹æ³• | ç«¯é» | èªªæ˜ | ç‹€æ…‹ |
|------|------|------|------|
| GET | `/api/v1/chatmessageapi/recent/<limit>` | å–å¾—æœ€è¿‘è¨Šæ¯ | âœ… |
| POST | `/api/v1/chatmessageapi/send` | ç™¼é€æ–°è¨Šæ¯ | âœ… |
| GET | `/api/v1/chatmessageapi/history` | å–å¾—æ­·å²è¨Šæ¯ | âœ… |
| POST | `/api/v1/chatmessageapi/delete/<id>` | è»Ÿåˆªé™¤è¨Šæ¯ | âœ… |

---

## âš ï¸ å¾…å®ŒæˆåŠŸèƒ½

### ğŸ”„ WebSocket å³æ™‚é€šè¨Š (æœ€é‡è¦)
- âŒ å»ºç«‹ Socket.IO æœå‹™å™¨
- âŒ å‰ç«¯ Socket.IO å®¢æˆ¶ç«¯
- âŒ å³æ™‚è¨Šæ¯å»£æ’­
- âŒ å³æ™‚ä¸Šç·š/é›¢ç·šé€šçŸ¥
- âŒ è¼¸å…¥ç‹€æ…‹æŒ‡ç¤ºå™¨

### ğŸ“ æª”æ¡ˆä¸Šå‚³åŠŸèƒ½
- âŒ åœ–ç‰‡åˆ†äº«
- âŒ æª”æ¡ˆé™„ä»¶ä¸Šå‚³
- âŒ æª”æ¡ˆé è¦½

### ğŸ¨ é€²éšåŠŸèƒ½
- âŒ è¡¨æƒ…ç¬¦è™Ÿæ”¯æ´
- âŒ è¨Šæ¯æœå°‹
- âŒ æ¡Œé¢é€šçŸ¥
- âŒ è²éŸ³æé†’

---

## ğŸ—ï¸ è³‡æ–™åº«æ¨¡å‹

### ChatMessage æ¨¡å‹
- `id`: ä¸»éµ
- `content`: è¨Šæ¯å…§å®¹
- `sender_id`: ç™¼é€è€… ID
- `message_type`: è¨Šæ¯é¡å‹ (text, image, file)
- `attachment_path`: é™„ä»¶è·¯å¾‘
- `is_deleted`: è»Ÿåˆªé™¤æ¨™è¨˜
- `reply_to_id`: å›è¦†è¨Šæ¯ ID
- `channel_id`: é »é“ ID
- `created_on`, `changed_on`: æ™‚é–“æˆ³è¨˜

### UserProfile æ¨¡å‹
- `user_id`: é—œè¯åˆ° Flask-AppBuilder User
- `display_name`: èŠå¤©å®¤é¡¯ç¤ºåç¨±
- `avatar_url`: å¤§é ­è²¼ç¶²å€
- `bio`: å€‹äººç°¡ä»‹
- `is_online`: æ˜¯å¦ç·šä¸Š
- `last_seen`: æœ€å¾Œä¸Šç·šæ™‚é–“
- `message_count`: ç™¼é€è¨Šæ¯æ•¸é‡

---

## ğŸ¯ ä¸‹ä¸€æ­¥é–‹ç™¼é‡é»

### ç¬¬ä¸€å„ªå…ˆï¼šå¯¦ä½œ WebSocket å³æ™‚é€šè¨Š
```javascript
// å‰ç«¯ Socket.IO äº‹ä»¶
{
  'join_room': { room_id: 1 },
  'send_message': { content: 'è¨Šæ¯', room_id: 1 },
  'typing_start': { user_id: 123 },
  'user_online': { user_id: 123 }
}

// å¾Œç«¯å»£æ’­äº‹ä»¶
{
  'new_message': { message_data },
  'user_joined': { user_data },
  'typing_indicator': { user_id, is_typing },
  'user_list_update': { online_users }
}
```

### ç¬¬äºŒå„ªå…ˆï¼šæª”æ¡ˆä¸Šå‚³ç³»çµ±
- æ”¯æ´åœ–ç‰‡ã€æ–‡ä»¶ä¸Šå‚³
- æª”æ¡ˆå¤§å°å’Œæ ¼å¼é™åˆ¶
- æª”æ¡ˆé è¦½åŠŸèƒ½

---

## ğŸ› ï¸ é–‹ç™¼ç’°å¢ƒéœ€æ±‚

### å¾Œç«¯ (Flask-AppBuilder)
```bash
pip install flask-appbuilder flask-sqlalchemy flask-cors flask-socketio
```

### å‰ç«¯ (Nuxt 3)
```bash
npm install @pinia/nuxt socket.io-client @nuxt/ui
```

---

## ğŸ“ˆ åŠŸèƒ½å®Œæˆåº¦

- **æ•´é«”é€²åº¦**: 70%
- **å¾Œç«¯é€²åº¦**: 95% (ç¼º WebSocket)
- **å‰ç«¯é€²åº¦**: 90% (ç¼º Socket.IO å®¢æˆ¶ç«¯)
- **ä½¿ç”¨è€…ç³»çµ±**: 100% (è¨»å†Šã€ç™»å…¥åŠŸèƒ½å®Œæˆ)
- **åŸºæœ¬èŠå¤©åŠŸèƒ½**: 70% (REST API å®Œæˆï¼Œç¼ºå³æ™‚åŒæ­¥)

---

## ğŸ™‹â€â™‚ï¸ ç¶­è­·è€…

å­å»º è”¡  
å°ˆæ¡ˆæ•´åˆé–‹ç™¼è€…ï¼Œè² è²¬æ¶æ§‹è¨­è¨ˆèˆ‡å‰å¾Œç«¯ä¸²æ¥ã€‚

---

**ç›®å‰å·²ç¶“æ˜¯ä¸€å€‹åŠŸèƒ½å®Œæ•´çš„èŠå¤©å®¤æ‡‰ç”¨ï¼Œåªå·®æœ€å¾Œçš„ WebSocket å³æ™‚é€šè¨ŠåŠŸèƒ½å°±èƒ½é”åˆ°å®Œæ•´çš„å³æ™‚èŠå¤©é«”é©—ï¼**